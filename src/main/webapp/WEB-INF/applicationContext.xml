<?xml version="1.0" encoding="UTF-8"?>
<beans
	xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans 
	                    http://www.springframework.org/schema/beans/spring-beans.xsd
	                    http://www.springframework.org/schema/util
	                    http://www.springframework.org/schema/util/spring-util.xsd">
	                    
	<bean id="trackerComponent" class="org.restlet.ext.spring.SpringComponent">
		<property name="defaultTarget" ref="trackerApplication" />
	</bean>

	<bean id="trackerComponentChildContext" class="org.restlet.Context"> 
		<lookup-method name="createChildContext" bean="trackerComponent.context" /> 
	</bean>
	
	<bean id="trackerApplication" class="ca.uhnresearch.pughlab.tracker.application.TrackerApplication">
		<property name="inboundRoot" ref="router" />
	</bean>

	<!-- Define the router -->
	<bean name="router" class="ca.uhnresearch.pughlab.tracker.restlets.CustomSpringRouter">
		<constructor-arg ref="trackerComponent" />
		<property name="attachments">
	        <map>
 	            <entry key="/api" value-ref="apiRouter" />
 	            <entry key="/statics" value-ref="staticsDirectory" />
	        </map>
	    </property>
	    <property name="defaultAttachment" ref="staticsRedirector" />
	</bean>
	
	<bean id="staticsRedirector" class="ca.uhnresearch.pughlab.tracker.restlets.CustomRedirector">
        <constructor-arg ref="trackerComponent" />
        <constructor-arg value="{o}/statics/index.html" />
        <constructor-arg value="7" />
    </bean>
	
	<bean id="staticsDirectory" class="ca.uhnresearch.pughlab.tracker.restlets.DirectoryFactoryBean">
		<property name="component" ref="trackerComponent" />
		<property name="resourceRoot" value="file:///Users/stuartw/git/tracker-java-restlet/target/client/tmp" />
	</bean>
	
	<bean id="trackerUpdateManager" class="ca.uhnresearch.pughlab.tracker.sockets.UpdateEventManager">
	</bean>
	
</beans>
